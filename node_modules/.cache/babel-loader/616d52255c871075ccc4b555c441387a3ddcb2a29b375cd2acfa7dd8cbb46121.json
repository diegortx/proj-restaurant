{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport date from \"../../helpers/date\";\nimport { convert } from \"../../helpers/convert\";\nexport default {\n  name: \"CheckoutScreen\",\n  props: {},\n  components: {},\n  data() {\n    return {\n      table: [],\n      payValue: \"\",\n      payValueDol: \"\",\n      payValueEur: \"\",\n      loadConvert: false\n    };\n  },\n  async created() {\n    this.table = this.$store.state.tables.find(table => table.id == this.$route.params.id);\n    this.value = this.table.value;\n    this.loadConvert = true;\n    const convertDol = await convert(\"BRL\", \"USD\", this.value);\n    this.payValueDol = convertDol;\n    const convertEur = await convert(\"BRL\", \"EUR\", this.value);\n    this.payValueEur = convertEur;\n    this.loadConvert = false;\n  },\n  methods: {\n    toHome() {\n      this.$router.push({\n        name: \"Home\"\n      });\n    },\n    async pay(value) {\n      this.$store.commit(\"setPayments\", {\n        id: this.$route.params.id,\n        value: this.payValue,\n        date: date.dateNow()\n      });\n      value = value - this.payValue;\n      if (value > 0) {\n        this.loadConvert = true;\n        const convertDol = await convert(\"BRL\", \"USD\", value);\n        this.payValueDol = convertDol;\n        const convertEur = await convert(\"BRL\", \"EUR\", value);\n        this.payValueEur = convertEur;\n        this.loadConvert = false;\n      } else {\n        this.payValueDol = 0;\n        this.payValueEur = 0;\n      }\n      this.payValue = \"\";\n    },\n    close() {\n      this.$store.commit(\"closeTable\", {\n        id: this.$route.params.id\n      });\n      this.toHome();\n    }\n  }\n};","map":{"version":3,"mappings":";AA6FA;AACA;AACA;EACAA;EACAC;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACA;IACA,2CACAJ,2CACA;IACA;IAEA;IACA;IACA;IAEA;IACA;IACA;EACA;EACAK;IACAC;MACA;QACAV;MACA;IACA;IACA;MACA;QACAW;QACAC;QACAC;MACA;MACAD;MAEA;QACA;QACA;QACA;QAEA;QACA;QACA;MACA;QACA;QACA;MACA;MAEA;IACA;IAEAE;MACA;QACAH;MACA;MAEA;IACA;EACA;AACA","names":["name","props","components","data","table","payValue","payValueDol","payValueEur","loadConvert","methods","toHome","id","value","date","close"],"sourceRoot":"src/views/Checkout","sources":["Checkout.vue"],"sourcesContent":["<template>\n  <div class=\"main\">\n    <div class=\"body-card\">\n      <div class=\"title-card\">Novo Pagamento</div>\n      <div class=\"checkout\">\n        <table class=\"ch-1\">\n          <tr>\n            <th>PEDIDO</th>\n            <th>QTD.</th>\n            <th>HORÁRIO</th>\n            <th>UND</th>\n            <th>VALOR</th>\n          </tr>\n          <tr v-for=\"(order, index) in table.order.products\" :key=\"index\">\n            <td v-show=\"order.count != 0\">{{ order.name }}</td>\n            <td v-show=\"order.count != 0\">{{ order.count }}</td>\n            <td v-show=\"order.count != 0\">{{ table.hour }}</td>\n            <td v-show=\"order.count != 0\">R${{ order.price }},00</td>\n            <td v-show=\"order.count != 0\">\n              R$ {{ order.price * order.count }},00\n            </td>\n          </tr>\n        </table>\n      </div>\n      <hr />\n      <div class=\"ch-2\">\n        <div>Total Parcial</div>\n        <div>R${{ table.value }},00</div>\n      </div>\n\n      <div\n        v-show=\"table.payment != []\"\n        v-for=\"(payment, index) in table.payment\"\n        :key=\"index\"\n        class=\"ch-3\"\n      >\n        <div class=\"ch-3-1\">\n          <div>Data</div>\n          <div>{{ payment.date }}</div>\n        </div>\n        <div class=\"ch-3-2\">\n          <div>Pagamento</div>\n          <div>- R${{ payment.value }},00</div>\n        </div>\n      </div>\n      <hr />\n\n      <div class=\"ch-2\">\n        <div>Total Restante</div>\n        <div>R$ {{ table.value }},00</div>\n      </div>\n      <hr />\n      <div v-if=\"loadConvert\" class=\"ch-convert\">\n        <div>USD  $ {{ payValueDol.toFixed(2) }}</div>\n        <div>EUR  € {{ payValueEur.toFixed(2) }}</div>\n      </div>\n      <div v-if=\"!loadConvert\" class=\"ch-convert\">\n        <img src=\"../../assets/loadc.gif\" width=\"50px\"/>\n      </div>\n      <div class=\"checkout-footer\">\n        <div class=\"table\">Mesa {{ table.id }}</div>\n        <div v-if=\"table.value > 0\" class=\"account\">\n          R$\n          <input\n            type=\"number\"\n            @keyup.enter=\"pay(table.value)\"\n            v-model=\"payValue\"\n            class=\"ch-pay\"\n          />\n        </div>\n        <div v-if=\"table.value < 0\" class=\"account\">\n          Necessário troco R$ {{ table.value }},00\n        </div>\n      </div>\n\n      <div class=\"buttom\">\n        <div class=\"cancel\" @click=\"toHome\">Cancelar</div>\n        <div\n          v-if=\"table.value > 0 && payValue > 0\"\n          class=\"pay\"\n          @click=\"pay(table.value)\"\n        >\n          Pagar\n        </div>\n        <div v-if=\"table.value <= 0\" class=\"close\" @click=\"close\">\n          Fechar Mesa\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n    \n  <script>\nimport date from \"../../helpers/date\";\nimport { convert } from \"../../helpers/convert\";\nexport default {\n  name: \"CheckoutScreen\",\n  props: {},\n  components: {},\n  data() {\n    return {\n      table: [],\n      payValue: \"\",\n      payValueDol: \"\",\n      payValueEur: \"\",\n      loadConvert: false,\n    };\n  },\n  async created() {\n    this.table = this.$store.state.tables.find(\n      (table) => table.id == this.$route.params.id\n    );\n    this.value = this.table.value;\n\n    this.loadConvert = true;\n    const convertDol = await convert(\"BRL\", \"USD\", this.value);\n    this.payValueDol = convertDol;\n\n    const convertEur = await convert(\"BRL\", \"EUR\", this.value);\n    this.payValueEur = convertEur;\n    this.loadConvert = false;\n  },\n  methods: {\n    toHome() {\n      this.$router.push({\n        name: \"Home\",\n      });\n    },\n    async pay(value) {\n      this.$store.commit(\"setPayments\", {\n        id: this.$route.params.id,\n        value: this.payValue,\n        date: date.dateNow(),\n      });\n      value = value - this.payValue;\n\n      if (value > 0) {\n        this.loadConvert = true;\n        const convertDol = await convert(\"BRL\", \"USD\", value);\n        this.payValueDol = convertDol;\n\n        const convertEur = await convert(\"BRL\", \"EUR\", value);\n        this.payValueEur = convertEur;\n        this.loadConvert = false;\n      } else {\n        this.payValueDol = 0;\n        this.payValueEur = 0;\n      }\n\n      this.payValue = \"\";\n    },\n\n    close() {\n      this.$store.commit(\"closeTable\", {\n        id: this.$route.params.id,\n      });\n\n      this.toHome();\n    },\n  },\n};\n</script>\n    \n  <style lang=\"scss\" scoped>\n@import \"../../scss/checkout/checkout.scss\";\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}